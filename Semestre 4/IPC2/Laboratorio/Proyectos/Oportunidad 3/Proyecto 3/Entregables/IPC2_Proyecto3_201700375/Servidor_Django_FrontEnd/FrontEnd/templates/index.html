<!DOCTYPE html>
<html lang="es">
    <head>
        <!-- Bootstrap -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">

        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <title>IPC2 Proyecto 3</title>
    </head>
    <body style="background-color: #EEE8AA">

        <!-- Opción Cargar Archivo -->
        <form id="FormSubirArchivo">
          <input type='file' class="btn btn-primary" id="ArchivoCargado" accept=".xml" name="ArchivoCargado" style="position: absolute; top: 13px; left: 5px">
          <input id="inSubirArchivo" type='submit' value="Enviar Archivo" class = "btn btn-primary" style="position: absolute; width: 150px; height: 40px; top: 14px; left: 330px">
        </form>

        <!-- Opción Peticiones -->
        <div class="btn-group">
          <button type="button" class="btn btn-warning dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false" style="width: 150px; height: 40px; position: absolute; top: 0px; left: 485px">
            Peticiones
          </button>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="#" id="btnConsultarDatos">Consultar Datos</a></li>
            <li><hr class="dropdown-divider"></li>
            <li><a class="dropdown-item" href="#" id="btnResumenIVA">Resumen IVA por Fecha y NIT</a></li>
            <li><a class="dropdown-item" href="#" id="btnResumenRango">Resumen por rango de fechas</a></li>
            <li><hr class="dropdown-divider"></li>
            <li><a class="dropdown-item" href="#" id="btnGrafica">Gráfica</a></li>
            <li><a class="dropdown-item" href="#" id="btnReportePDF">Reporte en PDF</a></li>
          </ul>
        </div>

        <!-- Opción Ayuda -->
        <div class="btn-group">
          <button type="button" class="btn btn-secondary dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false" style="width: 150px; height: 40px; position: absolute; top: 0px; left: 635px">
            Ayuda
          </button>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" onclick="myFunction()" id="btnInfoEstudiante">Información Estudiante</a></li>
            <li><a class="dropdown-item" href="#" id="btnDocumentacion">Documentación</a></li>
          </ul>
        </div>

        <!-- Botones Enviar y Reset -->
        <button type="button" id="btnReset" class="btn btn-danger" style="width: 150px; height: 40px; position: absolute; top: 14px; left: 793px">
            Reset
        </button>

        <!-- Rotulos Entrada y Salida -->
        <h3 style="position: absolute; top: 180px; left: 5px">Entrada:</h3>

        <h3 style="position: absolute; top: 180px; left: 450px">Salida:</h3>

        <!-- Labels de Entrada y Salida -->
        <label id="lblEntrada" style="position: absolute; top: 230px; left: 5px; width: 400px; height:400px" alt="CodigoEntrada">jojo</label>
        <label id="lblSalida" style="position: absolute; top: 230px; left: 400px; width: 400px; height:400px" alt="CodigoEntrada">gg</label>

        <!-- Función que muestra mis datos -->
        <script>
            function myFunction() {
                alert("Nombre: Bryan Steve Montepeque Santos \nCarnet: 201700375 \nIPC2 Sección E");
            }
        </script>

        <!-- Funciones Reales -->
        <script>

          //Input
          let FormSubirArchivo = document.getElementById("FormSubirArchivo");

          //Botones de la Barra de Herramientas
          let inSubirArchivo = document.getElementById("inSubirArchivo");
          let btnResumenIVA = document.getElementById("btnResumenIVA");
          let btnResumenRango = document.getElementById("btnResumenRango");
          let btnGrafica = document.getElementById("btnGrafica");
          let btnReportePDF = document.getElementById("btnReportePDF");
          let btnDocumentacion = document.getElementById("Documentacion");

          //Botones de los Labels
          let btnEnviar = document.getElementById("btnEnviar");
          let btnReset = document.getElementById("btnReset");
          
          //Labels
          let lblEntrada = document.getElementById("lblEntrada");
          let lblSalida = document.getElementById("lblSalida");

          //Aqui empiezan las funciones:

          FormSubirArchivo.addEventListener("submit", (e) => {
            e.preventDefault();
            fetch("http://localhost:5000/events/", {
              method: "POST",
              headers: {
                "Content-Type": "text/plain",
              },
              body: FormSubirArchivo.elements["ArchivoCargado"].files[0],
            }).then((res) => {
              if (res.ok) {
                lblEntrada.innerText = res.text();
                alert("Archivo enviado a API Flask");
              }
            });
          });
          
          //Boton Reset
          btnReset.addEventListener("submit", (e) => {
            
          });

        </script>

        <!-- Boostrap Bundle -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-p34f1UUtsS3wqzfto5wAAmdvj+osOnFyQFpp4Ua3gs/ZVWx6oOypYoCJhGGScy+8" crossorigin="anonymous"></script>
     </body>
</html>
